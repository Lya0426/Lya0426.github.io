
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>ES简介 | Lya</title>
<meta name="description" content="我辈皆矩火，复民族荣光！">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://lya0426.github.io/favicon.ico?v=1679368864478">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://lya0426.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://lya0426.github.io">
        <img class="avatar" src="https://lya0426.github.io/images/avatar.png?v=1679368864478" alt="" width="32px" height="32px">
      </a>
      <a href="https://lya0426.github.io">
        <h1 class="site-title">Lya</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
          <h2 class="post-title">ES简介</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2023-02-28</span>
            
          </div>
          <div class="post-content" v-pre>
            <h1 id="es">ES</h1>
<h2 id="一-es是什么">一、ES是什么</h2>
<p>Elasticsearch（简称ES）是一个基于<a href="https://so.csdn.net/so/search?q=Apache&amp;spm=1001.2101.3001.7020">Apache</a> Lucene(TM)的开源搜索引擎，无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。</p>
<p>但是，Lucene只是一个库。想要发挥其强大的作用，你需使用Java并要将其集成到你的应用中。Lucene非常复杂，你需要深入的了解检索相关知识来理解它是如何工作的。</p>
<p>Elasticsearch也是使用Java编写并使用Lucene来建立索引并实现搜索功能，但是它的目的是通过简单连贯的RESTful API让全文搜索变得简单并隐藏Lucene的复杂性。</p>
<p>不过，Elasticsearch不仅仅是Lucene和全文搜索引擎，它还提供：</p>
<ul>
<li>
<p>分布式的实时文件存储，每个字段都被索引并可被搜索</p>
</li>
<li>
<p>实时分析的分布式搜索引擎</p>
</li>
<li>
<p>可以扩展到上百台服务器，处理PB级结构化或非结构化数据</p>
</li>
</ul>
<p>而且，所有的这些功能被集成到一台服务器，你的应用可以通过简单的RESTful API、各种语言的客户端甚至命令行与之交互。上手Elasticsearch非常简单，它提供了许多合理的缺省值，并对初学者隐藏了复杂的搜索引擎理论。它开箱即用（安装即可使用），只需很少的学习既可在生产环境中使用。Elasticsearch在Apache 2 license下许可使用，可以免费下载、使用和修改。</p>
<p>随着知识的积累，你可以根据不同的问题领域定制Elasticsearch的高级特性，这一切都是可配置的，并且配置非常灵活。</p>
<h2 id="二-es的核心概念">二、ES的核心概念</h2>
<h3 id="near-realtime-接近实时">Near Realtime 接近实时</h3>
<p>接近实时，有两层意思：</p>
<ul>
<li>从写入数据到数据可以被搜索到有一个小延迟（大概是 1s）</li>
<li>基于 ES 执行搜索和分析可以达到秒级</li>
</ul>
<h3 id="cluster-集群">Cluster 集群</h3>
<p>集群包含多个节点，每个节点属于哪个集群都是通过一个配置来决定的，对于中小型应用来说，刚开始一个集群就一个节点很正常。</p>
<h3 id="node-节点">Node 节点</h3>
<p>Node 是集群中的一个节点，节点也有一个名称，默认是随机分配的。默认节点会去加入一个名称为 <code>elasticsearch</code> 的集群。如果直接启动一堆节点，那么它们会自动组成一个 elasticsearch 集群，当然一个节点也可以组成 elasticsearch 集群。</p>
<h3 id="document-field">Document &amp; field</h3>
<p>文档是 ES 中最小的数据单元，一个 document 可以是一条客户数据、一条商品分类数据、一条订单数据，通常用 json 数据结构来表示。每个 index 下的 type，都可以存储多条 document。一个 document 里面有多个 field，每个 field 就是一个数据字段。</p>
<pre><code class="language-json">{
    &quot;product_id&quot;: &quot;1&quot;,
    &quot;product_name&quot;: &quot;iPhone X&quot;,
    &quot;product_desc&quot;: &quot;苹果手机&quot;,
    &quot;category_id&quot;: &quot;2&quot;,
    &quot;category_name&quot;: &quot;电子产品&quot;
}
</code></pre>
<h3 id="index">Index</h3>
<p>索引包含了一堆有相似结构的文档数据，比如商品索引。一个索引包含很多 document，一个索引就代表了一类相似或者相同的 document。</p>
<h3 id="type">Type</h3>
<p>类型，每个索引里可以有一个或者多个 type，type 是 index 的一个逻辑分类，比如商品 index 下有多个 type：日化商品 type、电器商品 type、生鲜商品 type。每个 type 下的 document 的 field 可能不太一样。</p>
<h3 id="shard">shard</h3>
<p>单台机器无法存储大量数据，ES 可以将一个索引中的数据切分为多个 shard，分布在多台服务器上存储。有了 shard 就可以横向扩展，存储更多数据，让搜索和分析等操作分布到多台服务器上去执行，提升吞吐量和性能。每个 shard 都是一个 lucene index。</p>
<h3 id="replica">replica</h3>
<p>任何一个服务器随时可能故障或宕机，此时 shard 可能就会丢失，因此可以为每个 shard 创建多个 replica 副本。replica 可以在 shard 故障时提供备用服务，保证数据不丢失，多个 replica 还可以提升搜索操作的吞吐量和性能。primary shard（建立索引时一次设置，不能修改，默认 5 个），replica shard（随时修改数量，默认 1 个），默认每个索引 10 个 shard，5 个 primary shard，5 个 replica shard，最小的高可用配置，是 2 台服务器。</p>
<p>这么说吧，shard 分为 primary shard 和 replica shard。而 primary shard 一般简称为 shard，而 replica shard 一般简称为 replica。</p>
<p>![加载失败]（https://raw.githubusercontent.com/lya0426/PicBed_PicGo/master/MyPic/es-cluster-0.png）</p>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://lya0426.github.io/da-jian-jian-yi-bo-ke/">
              <h3 class="post-title">
                下一篇：搭建简易博客
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">我辈皆矩火，复民族荣光！</div>
  <div class="social-container">
    
      
        <a href="https://github.com/lya0426" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://lya0426.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
